##  宠物 AI 驱动（后台核心）

- **宠物状态机**：属性（体力/饱食度/经验/社交度）、心情、记忆。
- **AI 决策引擎**：
  - 基础：GOAP（目标导向行为规划）+ 随机事件。
  - 进阶：接入 LLM，让宠物有个性台词和更智能的选择。
- **行为循环**：
  - 每个 tick（定时器） → 宠物根据状态选择行为（探索/战斗/休息/社交）。
  - 行为结果写入事件流（Redis Pub/Sub → Web 前端）。
- **社交系统**：宠物会自动遇见别人宠物，产生随机互动。

👉 玩家只负责给“方向性指令”，绝大部分事件都由 AI 自动完成。

------

## 2️⃣ Web 界面设计（带 CLI 交互）

### **核心 UI 模块**

1. **事件流（主视图）**

   - 类似微博/推特刷屏：

     ```
     [Lucky] 遇到一只野猪，战斗胜利！+5 EXP
     [Alice 的宠物] 发现稀有水晶 → NFT 铸造成功
     [Tom 的宠物] 和 Lucky 成为了朋友
     ```

   - 实时订阅 WebSocket（或 GraphQL Subscriptions）。

2. **宠物状态面板**

   - 展示当前属性（体力、心情、装备、战斗力）。
   - 玩家可点“指令按钮”或在 CLI 输入命令。

3. **嵌入式 CLI 终端**

   - Web 页面下方有一个“命令行窗口”，样式类似黑客终端（黑底绿字）。

   - 支持输入命令，比如：

     ```
     > pet status
     Lucky 当前体力 80/100，心情：开心
     > pet explore north
     Lucky 出发去北方森林……
     > pet rest
     Lucky 开始休息……
     ```

   - 后端 API 接口与按钮操作一致，只是 CLI 是另一种交互方式。

------

## 3️⃣ 技术实现

### **前端 (React + Tailwind)**

- 事件流组件：实时订阅 WebSocket 推送。
- CLI 组件：
  - 输入框 + 输出区，模拟终端效果（用 `xterm.js` 或自己写）。
  - 输入命令 → 调用 REST API → 返回结果 → 在终端输出。
- 状态面板：展示宠物的数值、装备。

### **后端 (Go)**

- API：
  - `GET /pet/{id}/status` → 获取宠物状态
  - `POST /pet/{id}/command` → 执行指令（explore, rest, fight, chat）
  - `GET /events/stream` → WebSocket 推送宠物事件流
- 核心循环：goroutine 驱动 AI 宠物在后台行动，写事件到 Redis → 前端订阅。

### **区块链层 (可选)**

- 稀有掉落自动调用合约：
  - ERC-721 → NFT 宠物装备
  - ERC-20 → 宠物奖励代币
- 用 Go 的 `go-ethereum` SDK 与链交互。

------

## 🔥 体验效果

- **普通用户**：只看事件流和点按钮 → 类似轻量 MMO。
- **极客玩家**：在 Web 内置的命令行里下指令 → 获得“命令行挖矿”的复古感。
- **后台牛逼感**：宠物 24 小时在世界里活动，AI 自主决策，玩家只是“轻干预”。